(this["webpackJsonpclimaCidade-web"]=this["webpackJsonpclimaCidade-web"]||[]).push([[0],{101:function(e,t,a){e.exports=a(162)},137:function(e,t){},159:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=a(93),i=a(11),s=a(19),u=a(23),m=a.n(u),d=a(39),p=a(32),E=a(205),h=a(207),b=a(199),f=a(198),v=a(200),O=a(201),w=a(202),j=a(203),g=a(204),y=a(209),x=a(88),C=a.n(x),N=a(208),S=a(192),_=a(194);function k(e){var t=e.loading;return r.a.createElement(S.a,{in:t,style:{transitionDelay:"10ms"}},r.a.createElement(_.a,{color:"secondary"}))}var D=a(92),H=a.n(D).a.create({baseURL:"http://localhost:3001/"}),P=a(206),M=function(e){return e=e?new Date(e):new Date,Object(P.a)(e,"dd/MM/yyyy HH:mm")};a(159);function T(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/ClimaCidade-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL,t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)({search:!1,history:!1,top:!1}),i=Object(p.a)(o,2),u=i[0],x=i[1],S=Object(n.useState)({}),_=Object(p.a)(S,2),D=_[0],P=_[1],T=Object(n.useState)([]),A=Object(p.a)(T,2),B=A[0],L=A[1],R=Object(n.useState)([]),W=Object(p.a)(R,2),F=W[0],U=W[1],q=Object(n.useState)(!1),I=Object(p.a)(q,2),K=I[0],J=I[1];Object(n.useEffect)((function(){z(),G(),V()}),[]);var V=function(){var t=Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(N.a)(),C()(e,{query:{user_id:a}}).on("reloadHistory",(function(e){e.reload&&(z(),G())}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(s.a)(Object(s.a)({},u),{},{history:!0})),e.prev=1,e.next=4,H.get("/weather/history");case 4:t=e.sent,a=t.data,n=a.status,r=a.response,n?U(r):J(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),J(!0);case 13:x(Object(s.a)(Object(s.a)({},u),{},{history:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(s.a)(Object(s.a)({},u),{},{top:!0})),e.prev=1,e.next=4,H.get("/weather/top");case 4:t=e.sent,a=t.data,n=a.status,r=a.response,n?L(r):J(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),J(!0);case 13:x(Object(s.a)(Object(s.a)({},u),{},{top:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(Object(s.a)(Object(s.a)({},u),{},{search:!0})),e.prev=2,e.next=5,H.get("/weather/".concat(c));case 5:a=e.sent,n=a.data,r=n.status,l=n.response,r?P(l):J(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),J(!0);case 14:x(Object(s.a)(Object(s.a)({},u),{},{search:!1}));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{id:"content",onSubmit:Q},r.a.createElement("div",{id:"content-left"},r.a.createElement("div",{id:"left-card"},r.a.createElement(k,{loading:u.search}),r.a.createElement("div",{id:"search-card"},r.a.createElement(E.a,{autoComplete:"off",fullWidth:!0,required:!0,label:"Cidade",variant:"filled",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary"},"Buscar")),D.city?r.a.createElement("div",{className:"weather-container"},r.a.createElement("span",{className:"weather-date"},M(D.updatedAt)),r.a.createElement("span",{className:"weather-city"},D.city," - ",D.country),r.a.createElement("span",{className:"weather-text weather-icon"},r.a.createElement("img",{id:"wicon",src:D.icon,alt:"Weather icon"}),D.weather),r.a.createElement("strong",{className:"weather-temp"},D.tempNow.toFixed(0)," \xbaC"),r.a.createElement("div",{className:"weather-temp-container"},r.a.createElement("span",{className:"weather-text"},"M\xednima: ",D.tempMin.toFixed(0)," \xbaC"),r.a.createElement("span",{className:"weather-text"},"M\xe1xima: ",D.tempMax.toFixed(0)," \xbaC")),r.a.createElement("span",{className:"weather-text"},"Sensa\xe7\xe3o t\xe9rmica: ",D.feelsLike.toFixed(0)," \xbaC"),r.a.createElement("span",{className:"weather-text"},"Humidade do ar: ",D.humidity,"%"),r.a.createElement("span",{className:"weather-text"},"Velocidade do vento: ",D.windSpeed," m/s")):null)),r.a.createElement("div",{id:"content-right"},r.a.createElement("span",{className:"table-title"},"Cidades mais procuradas"),r.a.createElement(k,{loading:u.top}),r.a.createElement(b.a,{component:f.a},r.a.createElement(v.a,{"aria-label":"simple table"},r.a.createElement(O.a,null,r.a.createElement(w.a,null,r.a.createElement(j.a,null,"Posi\xe7\xe3o"),r.a.createElement(j.a,{align:"center"},"Cidade"),r.a.createElement(j.a,{align:"right"},"N\xba Buscas"))),r.a.createElement(g.a,null,B.map((function(e,t){return r.a.createElement(w.a,{key:e._id},r.a.createElement(j.a,{component:"th",scope:"row"},t+1),r.a.createElement(j.a,{align:"center"},e.name),r.a.createElement(j.a,{align:"right"},e.count))}))))),r.a.createElement("span",{className:"table-title"},"Buscadas recentes"),r.a.createElement(k,{loading:u.history}),r.a.createElement(b.a,{component:f.a,className:"table-history"},r.a.createElement(v.a,{"aria-label":"simple table"},r.a.createElement(O.a,null,r.a.createElement(w.a,null,r.a.createElement(j.a,null,"N\xba"),r.a.createElement(j.a,{align:"center"},"Cidade"),r.a.createElement(j.a,{align:"right"},"\xdaltima pesquisa"))),r.a.createElement(g.a,null,F.map((function(e,t){return r.a.createElement(w.a,{key:e._id},r.a.createElement(j.a,{component:"th",scope:"row"},t+1),r.a.createElement(j.a,{align:"center"},e.name),r.a.createElement(j.a,{align:"right"},M(e.updatedAt)))})))))),r.a.createElement(y.a,{anchorOrigin:{vertical:"top",horizontal:"left"},open:K,onClose:function(){return J(!1)},autoHideDuration:6e3,message:"Houve um erro ao executar esta a\xe7\xe3o. Por favor, tente novamente."}))}function A(){return r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",component:T})))}a(161);var B=function(){return r.a.createElement(A,null)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.58e76b22.chunk.js.map