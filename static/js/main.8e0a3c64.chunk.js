(this["webpackJsonpclimaCidade-web"]=this["webpackJsonpclimaCidade-web"]||[]).push([[0],{101:function(e,a,t){e.exports=t(162)},137:function(e,a){},159:function(e,a,t){},161:function(e,a,t){},162:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),o=t(93),i=t(11),s=t(19),m=t(23),u=t.n(m),p=t(39),d=t(32),E=t(205),h=t(207),b=t(199),f=t(198),v=t(200),O=t(201),w=t(202),j=t(203),g=t(204),y=t(209),x=t(88),C=t.n(x),N=t(208),S=t(192),_=t(194);function k(e){var a=e.loading;return r.a.createElement(S.a,{in:a,style:{transitionDelay:"10ms"}},r.a.createElement(_.a,{color:"secondary"}))}var D=t(92),H=t.n(D).a.create({baseURL:"https://clima-cidade-api.herokuapp.com/"}),P=t(206),M=function(e){return e=e?new Date(e):new Date,Object(P.a)(e,"dd/MM/yyyy HH:mm")};t(159);function T(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/ClimaCidade-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL,a=Object(n.useState)(""),t=Object(d.a)(a,2),c=t[0],l=t[1],o=Object(n.useState)({search:!1,history:!1,top:!1}),i=Object(d.a)(o,2),m=i[0],x=i[1],S=Object(n.useState)({}),_=Object(d.a)(S,2),D=_[0],P=_[1],T=Object(n.useState)([]),A=Object(d.a)(T,2),B=A[0],L=A[1],R=Object(n.useState)([]),W=Object(d.a)(R,2),F=W[0],U=W[1],q=Object(n.useState)(!1),I=Object(d.a)(q,2),K=I[0],J=I[1];Object(n.useEffect)((function(){z(),G(),V()}),[]);var V=function(){var a=Object(p.a)(u.a.mark((function a(){var t;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=Object(N.a)(),C()(e,{query:{user_id:t}}).on("reloadHistory",(function(e){e.reload&&(z(),G())}));case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(u.a.mark((function e(){var a,t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(s.a)(Object(s.a)({},m),{},{history:!0})),e.prev=1,e.next=4,H.get("/weather/history");case 4:a=e.sent,t=a.data,n=t.status,r=t.response,n?U(r):J(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),J(!0);case 13:x(Object(s.a)(Object(s.a)({},m),{},{history:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(u.a.mark((function e(){var a,t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(s.a)(Object(s.a)({},m),{},{top:!0})),e.prev=1,e.next=4,H.get("/weather/top");case 4:a=e.sent,t=a.data,n=t.status,r=t.response,n?L(r):J(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),J(!0);case 13:x(Object(s.a)(Object(s.a)({},m),{},{top:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(u.a.mark((function e(a){var t,n,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),x(Object(s.a)(Object(s.a)({},m),{},{search:!0})),e.prev=2,e.next=5,H.get("/weather/".concat(c));case 5:t=e.sent,n=t.data,r=n.status,l=n.response,r?P(l):J(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),J(!0);case 14:x(Object(s.a)(Object(s.a)({},m),{},{search:!1}));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("form",{id:"content",onSubmit:Q},r.a.createElement("div",{id:"content-left"},r.a.createElement("div",{id:"left-card"},r.a.createElement(k,{loading:m.search}),r.a.createElement("div",{id:"search-card"},r.a.createElement(E.a,{autoComplete:"off",fullWidth:!0,required:!0,label:"Cidade",variant:"filled",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary"},"Buscar")),D.city?r.a.createElement("div",{className:"weather-container"},r.a.createElement("span",{className:"weather-date"},M(D.updatedAt)),r.a.createElement("span",{className:"weather-city"},D.city," - ",D.country),r.a.createElement("span",{className:"weather-text weather-icon"},r.a.createElement("img",{id:"wicon",src:D.icon,alt:"Weather icon"}),D.weather),r.a.createElement("strong",{className:"weather-temp"},D.tempNow.toFixed(0)," \xbaC"),r.a.createElement("div",{className:"weather-temp-container"},r.a.createElement("span",{className:"weather-text"},"M\xednima: ",D.tempMin.toFixed(0)," \xbaC"),r.a.createElement("span",{className:"weather-text"},"M\xe1xima: ",D.tempMax.toFixed(0)," \xbaC")),r.a.createElement("span",{className:"weather-text"},"Sensa\xe7\xe3o t\xe9rmica: ",D.feelsLike.toFixed(0)," \xbaC"),r.a.createElement("span",{className:"weather-text"},"Humidade do ar: ",D.humidity,"%"),r.a.createElement("span",{className:"weather-text"},"Velocidade do vento: ",D.windSpeed," m/s")):null)),r.a.createElement("div",{id:"content-right"},r.a.createElement("span",{className:"table-title"},"Cidades mais procuradas"),r.a.createElement(k,{loading:m.top}),r.a.createElement(b.a,{component:f.a},r.a.createElement(v.a,{"aria-label":"simple table"},r.a.createElement(O.a,null,r.a.createElement(w.a,null,r.a.createElement(j.a,null,"Posi\xe7\xe3o"),r.a.createElement(j.a,{align:"center"},"Cidade"),r.a.createElement(j.a,{align:"right"},"N\xba Buscas"))),r.a.createElement(g.a,null,B.map((function(e,a){return r.a.createElement(w.a,{key:e._id},r.a.createElement(j.a,{component:"th",scope:"row"},a+1),r.a.createElement(j.a,{align:"center"},e.name),r.a.createElement(j.a,{align:"right"},e.count))}))))),r.a.createElement("span",{className:"table-title"},"Buscadas recentes"),r.a.createElement(k,{loading:m.history}),r.a.createElement(b.a,{component:f.a,className:"table-history"},r.a.createElement(v.a,{"aria-label":"simple table"},r.a.createElement(O.a,null,r.a.createElement(w.a,null,r.a.createElement(j.a,null,"N\xba"),r.a.createElement(j.a,{align:"center"},"Cidade"),r.a.createElement(j.a,{align:"right"},"\xdaltima pesquisa"))),r.a.createElement(g.a,null,F.map((function(e,a){return r.a.createElement(w.a,{key:e._id},r.a.createElement(j.a,{component:"th",scope:"row"},a+1),r.a.createElement(j.a,{align:"center"},e.name),r.a.createElement(j.a,{align:"right"},M(e.updatedAt)))})))))),r.a.createElement(y.a,{anchorOrigin:{vertical:"top",horizontal:"left"},open:K,onClose:function(){return J(!1)},autoHideDuration:6e3,message:"Houve um erro ao executar esta a\xe7\xe3o. Por favor, tente novamente."}))}function A(){return r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",component:T})))}t(161);var B=function(){return r.a.createElement(A,null)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.8e0a3c64.chunk.js.map