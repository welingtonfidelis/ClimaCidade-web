(this["webpackJsonpclimaCidade-web"]=this["webpackJsonpclimaCidade-web"]||[]).push([[0],{101:function(e,t,a){e.exports=a(162)},137:function(e,t){},159:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=a(93),s=a(11),i=a(19),m=a(23),u=a.n(m),p=a(39),d=a(32),h=a(205),E=a(207),b=a(199),f=a(198),v=a(200),w=a(201),O=a(202),j=a(203),g=a(204),y=a(209),x=a(88),N=a.n(x),k=a(208),C=a(192),S=a(194);function M(e){var t=e.loading;return r.a.createElement(C.a,{in:t,style:{transitionDelay:"10ms"}},r.a.createElement(S.a,{color:"secondary"}))}var H=a(92),D=a.n(H).a.create({baseURL:"http://localhost:3001"}),B=a(206),F=function(e){return e=e?new Date(e):new Date,Object(B.a)(e,"dd/MM/yyyy HH:mm")};a(159);function q(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({search:!1,history:!1,top:!1}),o=Object(d.a)(l,2),s=o[0],m=o[1],x=Object(n.useState)({}),C=Object(d.a)(x,2),S=C[0],H=C[1],B=Object(n.useState)([]),q=Object(d.a)(B,2),_=q[0],A=q[1],J=Object(n.useState)([]),L=Object(d.a)(J,2),P=L[0],W=L[1],z=Object(n.useState)(!1),I=Object(d.a)(z,2),R=I[0],U=I[1];Object(n.useEffect)((function(){G(),K(),V()}),[]);var V=function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(k.a)(),N()("https://clima-cidade-api.herokuapp.com/",{query:{user_id:t}}).on("reloadHistory",(function(e){e.reload&&(G(),K())}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(Object(i.a)(Object(i.a)({},s),{},{history:!0})),e.prev=1,e.next=4,D.get("/weather/history");case 4:t=e.sent,a=t.data,n=a.status,r=a.response,n?W(r):U(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),U(!0);case 13:m(Object(i.a)(Object(i.a)({},s),{},{history:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(Object(i.a)(Object(i.a)({},s),{},{top:!0})),e.prev=1,e.next=4,D.get("/weather/top");case 4:t=e.sent,a=t.data,n=a.status,r=a.response,n?A(r):U(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),U(!0);case 13:m(Object(i.a)(Object(i.a)({},s),{},{top:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),m(Object(i.a)(Object(i.a)({},s),{},{search:!0})),e.prev=2,e.next=5,D.get("/weather/".concat(a));case 5:n=e.sent,r=n.data,c=r.status,l=r.response,c?H(l):U(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),U(!0);case 14:m(Object(i.a)(Object(i.a)({},s),{},{search:!1}));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{id:"content",onSubmit:Q},r.a.createElement("div",{id:"content-left"},r.a.createElement("div",{id:"left-card"},r.a.createElement(M,{loading:s.search}),r.a.createElement("div",{id:"search-card"},r.a.createElement(h.a,{autoComplete:"off",fullWidth:!0,required:!0,label:"Cidade",variant:"filled",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary"},"Buscar")),S.city?r.a.createElement("div",{className:"weather-container"},r.a.createElement("span",{className:"weather-date"},F(S.updatedAt)),r.a.createElement("span",{className:"weather-city"},S.city," - ",S.country),r.a.createElement("span",{className:"weather-text weather-icon"},r.a.createElement("img",{id:"wicon",src:S.icon,alt:"Weather icon"}),S.weather),r.a.createElement("strong",{className:"weather-temp"},S.tempNow.toFixed(0)," \xbaC"),r.a.createElement("div",{className:"weather-temp-container"},r.a.createElement("span",{className:"weather-text"},"M\xednima: ",S.tempMin.toFixed(0)," \xbaC"),r.a.createElement("span",{className:"weather-text"},"M\xe1xima: ",S.tempMax.toFixed(0)," \xbaC")),r.a.createElement("span",{className:"weather-text"},"Sensa\xe7\xe3o t\xe9rmica: ",S.feelsLike.toFixed(0)," \xbaC"),r.a.createElement("span",{className:"weather-text"},"Humidade do ar: ",S.humidity,"%"),r.a.createElement("span",{className:"weather-text"},"Velocidade do vento: ",S.windSpeed," m/s")):null)),r.a.createElement("div",{id:"content-right"},r.a.createElement("span",{className:"table-title"},"Cidades mais procuradas"),r.a.createElement(M,{loading:s.top}),r.a.createElement(b.a,{component:f.a},r.a.createElement(v.a,{"aria-label":"simple table"},r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(j.a,null,"Posi\xe7\xe3o"),r.a.createElement(j.a,{align:"center"},"Cidade"),r.a.createElement(j.a,{align:"right"},"N\xba Buscas"))),r.a.createElement(g.a,null,_.map((function(e,t){return r.a.createElement(O.a,{key:e._id},r.a.createElement(j.a,{component:"th",scope:"row"},t+1),r.a.createElement(j.a,{align:"center"},e.name),r.a.createElement(j.a,{align:"right"},e.count))}))))),r.a.createElement("span",{className:"table-title"},"Buscadas recentes"),r.a.createElement(M,{loading:s.history}),r.a.createElement(b.a,{component:f.a,className:"table-history"},r.a.createElement(v.a,{"aria-label":"simple table"},r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(j.a,null,"N\xba"),r.a.createElement(j.a,{align:"center"},"Cidade"),r.a.createElement(j.a,{align:"right"},"\xdaltima pesquisa"))),r.a.createElement(g.a,null,P.map((function(e,t){return r.a.createElement(O.a,{key:e._id},r.a.createElement(j.a,{component:"th",scope:"row"},t+1),r.a.createElement(j.a,{align:"center"},e.name),r.a.createElement(j.a,{align:"right"},F(e.updatedAt)))})))))),r.a.createElement(y.a,{anchorOrigin:{vertical:"top",horizontal:"left"},open:R,onClose:function(){return U(!1)},autoHideDuration:6e3,message:"Houve um erro ao executar esta a\xe7\xe3o. Por favor, tente novamente."}))}function _(){return r.a.createElement(o.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",component:q})))}a(161);var A=function(){return r.a.createElement(_,null)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.ef49b1ee.chunk.js.map